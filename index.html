<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è·å¸ã—ä½œæ¥­ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        #name-input-container {
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            max-width: 600px;
            margin: auto;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #quiz, #result {
            display: none;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            max-width: 600px;
            margin: auto;
            text-align: left;
        }
        #start {
            display: none;
        }
        .hidden {
            display: none;
        }
        .explanation-correct {
            color: #218838;
            background-color: #f0fdf4;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .explanation-incorrect {
            color: #c82333;
            background-color: #fef0f0;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
        }
        .explanation-title {
            font-weight: bold;
            margin-top: 15px;
            margin-bottom: 5px;
        }
        #name-select {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            width: 250px;
        }
        #name-input-container button{
            padding: 10px 20px;
            border-radius: 5px;
            background-color: #007bff;
            color: #fff;
            border: none;
            cursor: pointer;
        }
        #name-input-container button:hover {
            background-color: #0056b3;
        }
       #result {
            text-align: center;
        }
        #result-summary {
            font-size: 1.2em;
            margin-bottom: 20px;
            font-weight: bold;
        }
        #update-date {
            font-size: 0.8em;
            color: #888;
            margin-top: 10px;
        }
        #version {
            font-size: 0.8em;
            color: #888;
            margin-top: 5px;
        }
        #all-answers {
            margin-top: 20px;
            text-align: left;
        }
        #download-button {
            margin-top: 20px;
        }

    </style>
</head>
<body>
    <h1>è·å¸ã—ä½œæ¥­ãƒ†ã‚¹ãƒˆ</h1>
    <div id="update-date">æ›´æ–°æ—¥ï¼š2025å¹´5æœˆ1æ—¥ 18:38</div>
    <div id="version">ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼š1.0.1</div>  <div id="name-input-container">
        <label for="name-select">æ‰€å±åº—èˆ—ã‚’é¸æŠã—ã¦ãã ã•ã„ï¼š</label><br>
        <select id="name-select" name="name" required>
            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
            <option value="ç·‘ãƒ¶ä¸˜">ç·‘ãƒ¶ä¸˜</option>
            <option value="èŠ±åœ’">èŠ±åœ’</option>
            <option value="å…«å¹¡">å…«å¹¡</option>
            <option value="é•·æµ¦">é•·æµ¦</option>
            <option value="é«˜æ£š">é«˜æ£š</option>
            <option value="è±Šæ˜æ±">è±Šæ˜æ±</option>
            <option value="ç¾½æ ¹">ç¾½æ ¹</ç¾½æ ¹</option>
            <option value="æ±æµ¦ã‚¹ã‚¿ãƒ³ãƒ‰">æ±æµ¦ã‚¹ã‚¿ãƒ³ãƒ‰</option>
            <option value="æ±æµ¦æ¤œæŸ»å ´">æ±æµ¦æ¤œæŸ»å ´</option>
            <option value="å¤§åºœã‚¹ã‚¿ãƒ³ãƒ‰">å¤§åºœã‚¹ã‚¿ãƒ³ãƒ‰</option>
            <option value="å¤§åºœæ¤œæŸ»å ´">å¤§åºœæ¤œæŸ»å ´</option>
            <option value="å¹¸ç”°ã‚¹ã‚¿ãƒ³ãƒ‰">å¹¸ç”°ã‚¹ã‚¿ãƒ³ãƒ‰</option>
            <option value="ä¸‰æ²³æ¤œæŸ»å ´">ä¸‰æ²³æ¤œæŸ»å ´</ä¸‰æ²³æ¤œæŸ»å ´</option>
            <option value="å¸¸æ»‘ã‚¹ã‚¿ãƒ³ãƒ‰">å¸¸æ»‘ã‚¹ã‚¿ãƒ³ãƒ‰</å¸¸æ»‘ã‚¹ã‚¿ãƒ³ãƒ‰</option>
            <option value="å¸¸æ»‘æ¤œæŸ»å ´">å¸¸æ»‘æ¤œæŸ»å ´</å¸¸æ»‘æ¤œæŸ»å ´</option>
            <option value="è±Šæ˜">è±Šæ˜</è±Šæ˜</option>
            <option value="ç¨²ç©‚">ç¨²ç©‚</ç¨²ç©‚</option>
            <option value="æ±æµ·é•·å£">æ±æµ·é•·å£</æ±æµ·é•·å£</option>
            <option value="è±Šç”°ä¸Šä¸˜">è±Šç”°ä¸Šä¸˜</è±Šç”°ä¸Šä¸˜</option>
            <option value="å²¡å´å®šå›½">å²¡å´å®šå›½</å²¡å´å®šå›½</option>
            <option value="ä¸‰ãƒ¶æ ¹">ä¸‰ãƒ¶æ ¹</ä¸‰ãƒ¶æ ¹</option>
            <option value="æ—¥é€²">æ—¥é€²</æ—¥é€²</option>
            <option value="é˜¿ä¹…æ¯”">é˜¿ä¹…æ¯”</é˜¿ä¹…æ¯”</option>
            <option value="åˆˆè°·">åˆˆè°·</åˆˆè°·</option>
            <option value="è¥¿å°¾">è¥¿å°¾</è¥¿å°¾</option>
            <option value="ãƒˆãƒ¬ãƒ¼ãƒ©ãƒ¼é…é€éƒ¨">ãƒˆãƒ¬ãƒ¼ãƒ©ãƒ¼é…é€éƒ¨</ãƒˆãƒ¬ãƒ¼ãƒ©ãƒ¼é…é€éƒ¨</option>
            <option value="æœ¬ç¤¾äº‹å‹™æ‰€">æœ¬ç¤¾äº‹å‹™æ‰€</æœ¬ç¤¾äº‹å‹™æ‰€</option>
            <option value="ãƒ¬ãƒƒã‚«ãƒ¼">ãƒ¬ãƒƒã‚«ãƒ¼</ãƒ¬ãƒƒã‚«ãƒ¼</option>
        </select>
        <label for="name-input">ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š</label><br>
        <input type="text" id="name-input" name="name" required>
        <button onclick="startQuiz()">ãƒ†ã‚¹ãƒˆé–‹å§‹</button>
    </div>

    <div id="quiz" class="hidden">
        <p id="question"></p>
        <div id="options"></div>
        <br>
        <button onclick="checkAnswer()">è§£ç­”ã™ã‚‹</button>
    </div>

    <div id="result" class="hidden">
        <p id="result-summary"></p>
        <p id="explanation"></p>
        <div id="all-answers"></div>
        <button id="nextButton" onclick="nextQuestion()">æ¬¡ã¸</button>
    </div>

    <script>
        const questions = [
            { q: "å‰å°ºã‚’æ¸¬å®šã™ã‚‹ç›®çš„ã¯ä½•ã§ã™ã‹ï¼Ÿ", options: ["è·å¸ã—æ•°é‡ã‚’ç¢ºèªã™ã‚‹ãŸã‚", "ç©ºé–“å®¹é‡ã‚’ç¢ºèªã—ã€æ²¹ãŒå…¥ã‚‹ã‹åˆ¤æ–­ã™ã‚‹ãŸã‚", "ã‚¿ãƒ³ã‚¯ã®åœ§åŠ›ã‚’ç¢ºèªã™ã‚‹ãŸã‚", "æ²¹ç¨®ã‚’è­˜åˆ¥ã™ã‚‹ãŸã‚"], answer: 1, explanation: "å‰å°ºã¯ã‚¿ãƒ³ã‚¯ã«ã©ã‚Œã ã‘ã®æ²¹ãŒå…¥ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«è¡Œã„ã¾ã™ã€‚" },
            { q: "è·å¸ã—å‰ã«åå‡ºå£ã®ã‚³ãƒƒã‚¯ã‚’å…¨ã¦é–‰ã‚ã‚‹ç›®çš„ã¯ï¼Ÿ", options: ["æ²¹ç¨®ã®ä¸€è‡´ç¢ºèªã®ãŸã‚", "ä½™è¨ˆãªæ²¹ãŒæµå‡ºã—ãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚", "è·å¸ã—æ•°é‡ã‚’èª¿æ•´ã™ã‚‹ãŸã‚", "æ²¹ç¨®ã®å“è³ªã‚’ç¢ºèªã™ã‚‹ãŸã‚"], answer: 1, explanation: "æ¼æ´©äº‹æ•…é˜²æ­¢ã®ãŸã‚ã€åå‡ºå£ã®ã‚³ãƒƒã‚¯ã¯é–‰ã‚ã¦ãŠãã¾ã™ã€‚" },
            { q: "ç©è·ã¨åå‡ºå£ã®æ²¹ç¨®ãƒ»æ•°é‡ã®ä¸€è‡´ç¢ºèªã®æ‰‹é †ã¯ï¼Ÿ", options: ["ç©è·ã®ãƒ©ãƒ™ãƒ«ã‚’ç¢ºèªã™ã‚‹", "ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã«æ²¹ç¨®ã‚¯ãƒªãƒƒãƒ—ã‚’è¦‹ã›ã¦ç¢ºèªã™ã‚‹", "åå‡ºå£ã®æ²¹ç¨®ã‚’å£°ã«å‡ºã—ã¦ç¢ºèªã—ã€ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã¨ä¸€è‡´ç¢ºèªã™ã‚‹", "æ²¹ç¨®ã‚’è©¦é¨“ç´™ã§æ¤œæŸ»ã™ã‚‹"], answer: 2, explanation: "å£°ã«å‡ºã—ã¦ç¢ºèªã—ã€ãƒ€ãƒ–ãƒ«ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†ã“ã¨ãŒé‡è¦ã§ã™ã€‚" },
            { q: "è·å¸ã—ä½œæ¥­ã®é †åºã§æœ€åˆã«è·å¸ã—ã™ã‚‹ã®ã¯ã©ã®æ²¹ç¨®ã§ã™ã‹ï¼Ÿ", options: ["ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼", "è»½æ²¹", "ç¯æ²¹", "ãƒã‚¤ã‚ªã‚¯"], answer: 2, explanation: "æ··æ²¹é˜²æ­¢ã®ãŸã‚ç¯æ²¹ã‚’å…ˆã«è·å¸ã—ã—ã¾ã™ã€‚" },
            { q: "è·å¸ã—é †åºã®æ±ºå®šã§æœ€ã‚‚é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã¯ï¼Ÿ", options: ["ä½œæ¥­ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’å„ªå…ˆã™ã‚‹", "ç¯æ²¹ã‚’æœ€å¾Œã«ã™ã‚‹", "æ²¹ç¨®ã®ã‚³ãƒ³ã‚¿ãƒŸã‚’é˜²ããŸã‚ã«é †ç•ªã‚’å®ˆã‚‹", "è·å¸ã—ã®å‰ã«å…¨ã¦ã®ã‚¿ãƒ³ã‚¯ã‚’ç©ºã«ã™ã‚‹"], answer: 2, explanation: "æ··æ²¹ï¼ˆã‚³ãƒ³ã‚¿ãƒŸï¼‰ã‚’é˜²ãé †åºã§ä½œæ¥­ã™ã‚‹ã®ãŒåŸºæœ¬ã§ã™ã€‚" },
            { q: "è·å¸ã—é †åºã‚’æ±ºå®šã™ã‚‹éš›ã€é©åˆ‡ãªé †ç•ªã¯ï¼Ÿ", options: ["è»½æ²¹ â†’ ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ â†’ ç¯æ²¹ â†’ ãƒã‚¤ã‚ªã‚¯", "ç¯æ²¹ â†’ ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ â†’ ãƒã‚¤ã‚ªã‚¯ â†’ è»½æ²¹", "ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ â†’ è»½æ²¹ â†’ ãƒã‚¤ã‚ªã‚¯ â†’ ç¯æ²¹", "ãƒã‚¤ã‚ªã‚¯ â†’ ç¯æ²¹ â†’ è»½æ²¹ â†’ ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼"], answer: 1, explanation: "ç¯æ²¹ã‚’æœ€åˆã«è·å¸ã—ã™ã‚‹é †ç•ªãŒåŸºæœ¬ã§ã™ã€‚" },
            { q: "æ³¨æ²¹å£ã‚’é–‹ã‘ãŸæ™‚ã«è¡Œã†ã¹ãç¢ºèªäº‹é …ã¯ï¼Ÿ", options: ["ã‚¿ãƒ³ã‚¯ã®æ¸©åº¦ã‚’æ¸¬å®šã™ã‚‹", "æ²¹ç¨®ã‚¯ãƒªãƒƒãƒ—ã¨ãƒ©ãƒ™ãƒ«ã‚’ç¢ºèªã™ã‚‹", "ãƒ‘ãƒƒã‚­ãƒ³ã®ç•°å¸¸ãŒãªã„ã‹ç¢ºèªã™ã‚‹", "æ³¨æ²¹å£ã®è“‹ã‚’äº¤æ›ã™ã‚‹"], answer: 2, explanation: "å®‰å…¨ã®ãŸã‚ãƒ‘ãƒƒã‚­ãƒ³ã«ç•°å¸¸ãŒãªã„ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚" },
            { q: "ãƒ›ãƒ¼ã‚¹ã®æ¥ç¶šæ™‚ã«ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã¨ç›¸äº’ç¢ºèªã™ã‚‹é …ç›®ã¯ï¼Ÿ", options: ["æ²¹ç¨®ã‚¯ãƒªãƒƒãƒ—ãƒ»æ³¨æ²¹å£ãƒ©ãƒ™ãƒ«", "åå‡ºå£ã®é–‹é–‰çŠ¶æ³", "ã‚¿ãƒ³ã‚¯å†…ã®æ²¹é¢", "è·å¸ã—ã®ã‚¹ãƒ”ãƒ¼ãƒ‰"], answer: 0, explanation: "æ²¹ç¨®ãƒŸã‚¹é˜²æ­¢ã®ãŸã‚ã€æ¥ç¶šå…ˆã‚’ç›¸äº’ã«ç¢ºèªã—ã¾ã™ã€‚" },
            { q: "åå‡ºå£ã®ã‚³ãƒƒã‚¯ã‚’é–‹æ”¾ã™ã‚‹å‰ã«ç¢ºèªã™ã¹ãé …ç›®ã¯ï¼Ÿ", options: ["ã‚µã‚¤ãƒˆã‚°ãƒ©ã‚¹ã§æ²¹ç¨®ã®è‰²ã‚’ç¢ºèªã™ã‚‹", "æ³¨æ²¹å£ã®è“‹ãŒé–‹ã„ã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹", "æ²¹ç¨®ã‚¯ãƒªãƒƒãƒ—ã®è‰²ã‚’å¤‰æ›´ã™ã‚‹", "ã‚¿ãƒ³ã‚¯ã®åœ§åŠ›ã‚’èª¿æ•´ã™ã‚‹"], answer: 0, explanation: "ã‚µã‚¤ãƒˆã‚°ãƒ©ã‚¹ã§æµã‚Œã‚‹æ²¹ã®è‰²ã‚’ç¢ºèªã—æ²¹ç¨®ä¸€è‡´ã‚’ç¢ºã‹ã‚ã¾ã™ã€‚" },
            { q: "ã‚µã‚¤ãƒˆã‚°ãƒ©ã‚¹ã«ã¦ç¢ºèªã™ã‚‹äº‹é …ã¯ä½•ã§ã™ã‹ï¼Ÿ", options: ["æ²¹ç¨®ã®è‰²", "ã‚¿ãƒ³ã‚¯ã®æ¸©åº¦", "æ²¹é¢ã®å¤‰åŒ–", "ãƒ›ãƒ¼ã‚¹ã®é•·ã•"], answer: 0, explanation: "ã‚µã‚¤ãƒˆã‚°ãƒ©ã‚¹ã§ã¯æµã‚Œã¦ã„ã‚‹æ²¹ã®è‰²ã‚’ç¢ºèªã§ãã¾ã™ã€‚" },
            { q: "ç¯æ²¹ã®è‰²ã¯ä½•è‰²ã§ã™ã‹ï¼Ÿ", options: ["ç„¡è‰²é€æ˜", "æ©™è‰²", "é’è‰²", "æ·¡é»„è‰²"], answer: 0, explanation: "ç¯æ²¹ã¯ç„¡è‰²é€æ˜ã§ã™ã€‚" },
            { q: "ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ã®è‰²ã¯ä½•è‰²ã§ã™ã‹ï¼Ÿ", options: ["ç„¡è‰²é€æ˜", "æ©™è‰²", "é’è‰²", "æ·¡é»„è‰²"], answer: 1, explanation: "ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ã¯æ©™è‰²ã«ç€è‰²ã•ã‚Œã¦ã„ã¾ã™ã€‚" },
            { q: "ãƒã‚¤ã‚ªã‚¯ã®è‰²ã¯ä½•è‰²ã§ã™ã‹ï¼Ÿ", options: ["ç„¡è‰²é€æ˜", "æ©™è‰²", "é’è‰²", "æ·¡é»„è‰²"], answer: 1, explanation: "ãƒã‚¤ã‚ªã‚¯ã‚‚ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼åŒæ§˜ã€æ©™è‰²ã§è­˜åˆ¥ã•ã‚Œã¾ã™ã€‚" },
            { q: "è»½æ²¹ã®è‰²ã¯ä½•è‰²ã§ã™ã‹ï¼Ÿ", options: ["ç„¡è‰²é€æ˜", "æ©™è‰²", "èµ¤è‰²", "æ·¡é»„è‰²"], answer: 3, explanation: "è»½æ²¹ã¯æ·¡é»„è‰²ã«ç€è‰²ã•ã‚Œã¦ã„ã¾ã™ã€‚" },
            { q: "è·å¸ã—é–‹å§‹æ™‚ã«ç¢ºèªã™ã¹ãé …ç›®ã¯ï¼Ÿ", options: ["åå‡ºå£ã®é–‹é–‰çŠ¶æ³", "ã‚¿ãƒ³ã‚¯ã®æ¸©åº¦", "æ²¹æ¼ã‚ŒãŒãªã„ã‹", "ãƒ›ãƒ¼ã‚¹ã®é•·ã•"], answer: 2, explanation: "è·å¸ã—ç›´å¾Œã®æ¼æ´©ç¢ºèªã¯é‡è¦ã§ã™ã€‚" },
            { q: "è·å¸ã—ä½œæ¥­ä¸­ã«ç•°å¸¸ãŒç™ºç”Ÿã—ãŸå ´åˆã®å¯¾å¿œã¯ï¼Ÿ", options: ["ã™ãã«è·å¸ã—ã‚’åœæ­¢ã—ã€åŸå› ã‚’ç¢ºèªã™ã‚‹", "ç«‹ä¼šäººãŒã„ã‚‹å ´åˆã¯ãã®ã¾ã¾ä½œæ¥­ã‚’ç¶šã‘ã‚‹", "ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã«ç¢ºèªã—ãªãŒã‚‰ä½œæ¥­ã‚’é€²ã‚ã‚‹", "ã¾ãšã‚¿ãƒ³ã‚¯å†…ã®æ²¹é‡ã‚’å†ç¢ºèªã™ã‚‹"], answer: 0, explanation: "ç•°å¸¸ãŒç™ºç”Ÿã—ãŸã‚‰å³åº§ã«ä½œæ¥­ã‚’ä¸­æ–­ã—ã€å®‰å…¨ç¢ºèªã‚’è¡Œã„ã¾ã™ã€‚" },
            { q: "è·å¸ã—ä½œæ¥­ä¸­ã®å®‰å…¨ç›£è¦–ã§ç¢ºèªã™ã¹ãäº‹é …ã¯ï¼Ÿ", options: ["æ²¹é¢è¨ˆã‚„ã¹ãƒ¼ãƒ‘ãƒ¼", "åå‡ºå£ã®é–‹é–‰çŠ¶æ³", "è·å¸ã—ã‚¹ãƒ”ãƒ¼ãƒ‰", "ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã®åå‰"], answer: 0, explanation: "å®‰å…¨è£…ç½®ï¼ˆæ²¹é¢è¨ˆãƒ»ãƒ™ãƒ¼ãƒ‘ãƒ¼ï¼‰ã§å¸¸æ™‚ç›£è¦–ã—ã¾ã™ã€‚" },
            { q: "è·å¸ã—ä¸­ã«å ´ã‚’é›¢ã‚Œã‚‹éš›ã€è¡Œã†ã¹ãå¯¾å¿œã¯ï¼Ÿ", options: ["åå‡ºå£ã‚³ãƒƒã‚¯ã‚’é–‰æ­¢ã™ã‚‹", "ã‚¿ãƒ³ã‚¯ã®è“‹ã‚’é–‰ã‚ã‚‹", "ãƒ›ãƒ¼ã‚¹ã‚’å–ã‚Šå¤–ã™", "ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã«è·å¸ã—ã‚’ä»»ã›ã‚‹"], answer: 0, explanation: "å ´ã‚’é›¢ã‚Œã‚‹æ™‚ã¯ã€å¿…ãšã‚³ãƒƒã‚¯ã‚’é–‰æ­¢ã—å®‰å…¨ç¢ºä¿ã—ã¾ã™ã€‚" },
            { q: "è·å¸ã—çµ‚äº†å¾Œã€æœ€åˆã«ç¢ºèªã™ã¹ãé …ç›®ã¯ï¼Ÿ", options: ["é…ç®¡å†…ã®æ®‹æ²¹ãŒãªã„ã‹", "æ³¨æ²¹å£ã®ãƒ‘ãƒƒã‚­ãƒ³ã®ç•°å¸¸", "æ²¹ç¨®ã‚¯ãƒªãƒƒãƒ—ã®è‰²", "åå‡ºå£ã®é–‹é–‰çŠ¶æ³"], answer: 0, explanation: "æ®‹æ²¹ãŒæ®‹ã£ã¦ã„ãªã„ã‹ã‚’ç¢ºèªã—ã€æ¼æ´©é˜²æ­¢ã‚’å›³ã‚Šã¾ã™ã€‚" },
            { q: "è·å¸ã—çµ‚äº†å¾Œã€å¾Œå°ºã‚’æ¸¬å®šã™ã‚‹ç›®çš„ã¯ï¼Ÿ", options: ["è·å¸ã—æ•°é‡ã®ç•°å¸¸ã‚„ã‚³ãƒ³ã‚¿ãƒŸã‚’ç¢ºèªã™ã‚‹ãŸã‚", "æ³¨æ²¹å£ã®ãƒ©ãƒ™ãƒ«ã‚’ç¢ºèªã™ã‚‹ãŸã‚", "ãƒ›ãƒ¼ã‚¹ã®æ¥ç¶šçŠ¶æ…‹ã‚’ç¢ºèªã™ã‚‹ãŸã‚", "ãƒˆãƒ©ãƒƒã‚¯ã®è»Šè¼ªã®çŠ¶æ…‹ã‚’ç¢ºèªã™ã‚‹ãŸã‚"], answer: 0, explanation: "å¾Œå°ºæ¸¬å®šã«ã‚ˆã‚Šã€è·å¸ã—æ•°é‡ã®å¦¥å½“æ€§ã‚„æ··æ²¹ã®æœ‰ç„¡ã‚’ç¢ºèªã—ã¾ã™ã€‚" },
            { q: "å¾Œå°ºã®ç•°å¸¸åŸºæº–ã¯ï¼Ÿ", options: ["ï¼ˆå‰å°ºï¼‹è·å¸ã—æ•°é‡ï¼‰Ã—101ï¼…ï¼œå¾Œå°º", "ï¼ˆè·å¸ã—æ•°é‡ï¼‰Ã—102ï¼…ï¼å‰å°º", "ï¼ˆå‰å°ºï¼‹è·å¸ã—æ•°é‡ï¼‰Ã—100ï¼…ï¼å¾Œå°º", "ï¼ˆå¾Œå°ºï¼‰Ã—99ï¼…ï¼œå‰å°º"], answer: 0, explanation: "å¾Œå°ºãŒ101ï¼…ã‚’è¶…ãˆã¦ã„ãŸã‚‰ã€ã‚³ãƒ³ã‚¿ãƒŸã‚„æ¸¬å®šãƒŸã‚¹ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚" },
            { q: "è·å¸ã—çµ‚äº†å¾Œã«ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã¨ç›¸äº’ã«ç¢ºèªã™ã¹ãå†…å®¹ã¯ï¼Ÿ", options: ["è·å¸ã—æ•°é‡ã¨æ²¹ç¨®ã®ä¸€è‡´", "ãƒ›ãƒ¼ã‚¹ã®æ¥ç¶šçŠ¶æ…‹", "ã‚¿ãƒ³ã‚¯ã®æ¸©åº¦", "æ²¹ç¨®ã‚¯ãƒªãƒƒãƒ—ã®è‰²"], answer: 0, explanation: "æ•°é‡ãƒ»æ²¹ç¨®ãŒåˆã£ã¦ã„ãŸã‹æœ€çµ‚ç¢ºèªã‚’å¿…ãšè¡Œã„ã¾ã™ã€‚" },
        ];

        let currentQuestionIndex = 0;
        let correctAnswers = 0; // æ­£è§£æ•°ã‚’è¨˜éŒ²ã™ã‚‹å¤‰æ•°
        let userName = ""; // ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’ä¿å­˜ã™ã‚‹å¤‰æ•°
        let userAnswers = []; // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç­”ã‚’ä¿å­˜ã™ã‚‹é…åˆ—
        // ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆIDã¨ã‚·ãƒ¼ãƒˆå
        const SPREADSHEET_ID = "15PEK4SbxGgZvaM2evzK6w2qI0qPb8qkggU_J-9oZOGk";  // â˜…  ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆID
        const SHEET_NAME = "ã‚·ãƒ¼ãƒˆ1";             // â˜…  ã‚·ãƒ¼ãƒˆå
        const GAS_URL = "https://script.google.com/macros/s/AKfycbxaNPCJuLsJ5ec1OwptnW_JP7ms5J28RqmWq2KmBe33nKbQ-oy2bbs4UQLF3sFLAOmETg/exec"; //â˜… GASã®URL
        const SHEET_URL = "https://docs.google.com/spreadsheets/d/15PEK4SbxGgZvaM2evzK6w2qI0qPb8qkggU_J-9oZOGk/edit?hl=ja&pli=1&gid=0#gid=0"; //â˜… ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®URL


        function startQuiz() {
            const nameSelect = document.getElementById("name-select");
            const nameInput = document.getElementById("name-input");
            userName = nameSelect.value + " " + nameInput.value;
            if (!nameSelect.value) {
                alert("æ‰€å±åº—èˆ—ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");
                return;
            }
            if (!nameInput.value.trim()) {
                alert("åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
                return;
            }

            document.getElementById("name-input-container").style.display = "none";
            document.getElementById("quiz").style.display = "block";
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestionIndex >= questions.length) {
                // å…¨ã¦ã®å•é¡ŒãŒçµ‚äº†ã—ãŸå ´åˆã®å‡¦ç†
                recordResult();
                return;
            }

            let questionData = questions[currentQuestionIndex];
            document.getElementById("question").innerText = questionData.q;

            let optionsHtml = "";
            questionData.options.forEach((option, index) => {
                optionsHtml += `<input type="radio" name="q1" value="${index}"> ${option}<br>`;
            });

            document.getElementById("options").innerHTML = optionsHtml;
        }

        function checkAnswer() {
            let answer = document.querySelector('input[name="q1"]:checked');

            if (!answer) {
                alert("é¸æŠè‚¢ã‚’é¸ã‚“ã§ãã ã•ã„");
                return;
            }

            let questionData = questions[currentQuestionIndex];
            let explanationDiv = document.getElementById("explanation");
            explanationDiv.innerHTML = "";

            if (parseInt(answer.value) === questionData.answer) {
                correctAnswers++;
                const correctText = document.createElement("p");
                correctText.className = "explanation-correct";
                correctText.innerHTML = `âœ… æ­£è§£ï¼š ${questionData.options[questionData.answer]}`;
                explanationDiv.appendChild(correctText);
                userAnswers.push(true); // æ­£è§£ã‚’è¨˜éŒ²

                const explanationTitle = document.createElement("p");
                explanationTitle.className = "explanation-title";
                explanationTitle.innerText = "ğŸ“Œ è§£èª¬:";
                explanationDiv.appendChild(explanationTitle);

                const explanationText = document.createElement("p");
                explanationText.innerText = questionData.explanation;
                explanationDiv.appendChild(explanationText);

            } else {
                const incorrectText = document.createElement("p");
                incorrectText.className = "explanation-incorrect";
                incorrectText.innerHTML = `âŒ ä¸æ­£è§£ã§ã™ã€‚<br><br>æ­£è§£ã¯ï¼š ${questionData.options[questionData.answer]}`;
                explanationDiv.appendChild(incorrectText);
                userAnswers.push(false); // ä¸æ­£è§£ã‚’è¨˜éŒ²

                const explanationTitle = document.createElement("p");
                explanationTitle.className = "explanation-title";
                explanationTitle.innerText = "ğŸ“Œ è§£èª¬:";
                explanationDiv.appendChild(explanationTitle);

                const explanationText = document.createElement("p");
                explanationText.innerText = questionData.explanation;
                explanationDiv.appendChild(explanationText);
            }

            document.getElementById("quiz").style.display = "none";
            document.getElementById("result").style.display = "block";
            document.getElementById("nextButton").style.display = "block";
        }

        function nextQuestion() {
            currentQuestionIndex++;

            if (currentQuestionIndex < questions.length) {
                document.getElementById("result").style.display = "none";
                document.getElementById("quiz").style.display = "block";
                loadQuestion();
            } else {
                recordResult();
            }
        }

        function recordResult() {
            const testResult = {
                name: userName,
                date: new Date().toLocaleString(),
                correct: correctAnswers,
                total: questions.length,
                answers: userAnswers // å›ç­”å±¥æ­´ã‚’ä¿å­˜
            };

            // çµæœè¡¨ç¤º
            const resultSummary = document.getElementById("result-summary");
            resultSummary.innerHTML = `ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼<br>ã‚ãªãŸã®æˆç¸¾ã¯ ${questions.length}å•ä¸­ ${correctAnswers}å•æ­£è§£ã§ã—ãŸã€‚<br><a href="${SHEET_URL}" target="_blank">çµæœã¯ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã§ç¢ºèªã§ãã¾ã™</a>`; // ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®URLã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ä¿®æ­£

            // å…¨å•ã®æ­£èª¤ã‚’è¡¨ç¤º
            let allAnswersDiv = document.getElementById("all-answers");
            let allAnswersHTML = "<h3>ã‚ãªãŸã®å›ç­”</h3><ul>";
            questions.forEach((question, index) => {
                const resultText = userAnswers[index] ? "âœ… æ­£è§£" : "âŒ ä¸æ­£è§£";
                allAnswersHTML += `<li>ç¬¬${index + 1}å•ï¼š${resultText}</li>`;
            });
            allAnswersHTML += "</ul>";
            allAnswersDiv.innerHTML = allAnswersHTML;

            // Google Apps Scriptã«çµæœã‚’é€ä¿¡
            fetch(GAS_URL, {  // â˜…  GASã®URL
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(testResult)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                console.log('Success:', data);
                 // æˆåŠŸã—ãŸå ´åˆã€CSVãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤ºã«ã™ã‚‹ãªã©ã®å‡¦ç†ã‚‚ã“ã“ã«è¨˜è¿°ã§ãã¾ã™
                // document.getElementById("download-button").style.display = "none";
                 alert("çµæœã‚’Googleã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«è¨˜éŒ²ã—ã¾ã—ãŸã€‚ãŠç–²ã‚Œæ§˜ã§ã—ãŸã€‚");
            })
            .catch(error => {
                console.error("Error:", error);
                alert("çµæœã®è¨˜éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãŠç–²ã‚Œæ§˜ã§ã—ãŸã€‚");
            });

            document.getElementById("result").style.display = "none";
            document.getElementById("start").style.display = "block";
            currentQuestionIndex = 0;
            correctAnswers = 0;
            userAnswers = [];
        }



        function downloadCsv() {
            // localStorageã‹ã‚‰çµæœã‚’å–å¾—ã™ã‚‹ä»£ã‚ã‚Šã«ã€ç¾åœ¨ã®çµæœã‚’ä½¿ç”¨
            const testResult = {
                name: userName,
                date: new Date().toLocaleString(),
                correct: correctAnswers,
                total: questions.length,
                answers: userAnswers
            };

            // CSVå½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ
            let csvContent = "å‚åŠ è€…,æ—¥æ™‚,æ­£è§£æ•°,ç·å•é¡Œæ•°,";
            questions.forEach((question, index) => {
                csvContent += `ç¬¬${index + 1}å•,`;
            });
            csvContent += "\n";

            csvContent += `${testResult.name},${testResult.date},${testResult.correct},${testResult.total},`;
            testResult.answers.forEach(answer => {
                csvContent += answer ? "æ­£è§£," : "ä¸æ­£è§£,";
            });
            csvContent += "\n";

            // BOMã‚’ä»˜ä¸ã—ã¦UTF-8ã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹
            const bom = new Uint8Array([0xEF, 0xBB, 0xBF]);
            const csvBlob = new Blob([bom, csvContent], { type: 'text/csv;charset=utf-8;' });
            const csvUrl = URL.createObjectURL(csvBlob);

            // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã‚’ä½œæˆã—ã¦ã‚¯ãƒªãƒƒã‚¯
            const link = document.createElement("a");
            link.href = csvUrl;
            link.setAttribute("download", "test_result.csv");
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(csvUrl);

            alert("çµæœã‚’CSVãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸã€‚ãŠç–²ã‚Œæ§˜ã§ã—ãŸã€‚");
        }

        function displayDateTime() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0'); // æœˆã¯0ã‹ã‚‰å§‹ã¾ã‚‹ãŸã‚+1
            const day = String(now.getDate()).padStart(2, '0');

            const dateString = `${year}å¹´${month}æœˆ${day}æ—¥`;
            document.getElementById("current-datetime").textContent = dateString;
        }
    </script>
</body>
</html>
